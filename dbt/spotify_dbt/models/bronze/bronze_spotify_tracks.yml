version: 2

models:
  - name: bronze_spotify_tracks
    description: >
      Bronze-level model for deduplicating Spotify track data.
      Each row represents a unique combination of artist and track name,
      with metadata aggregated from the raw source table. This model includes
      a surrogate `song_id` and is the foundation for silver and gold models.

    columns:
      - name: song_id
        description: >
          Surrogate key generated by hashing artist and track name.
          Used for identifying unique songs across the pipeline.
        tests:
          - not_null
          - unique

      - name: raw_id
        description: >
          The minimum raw source table ID for this song.
          Represents the earliest record seen for the (artist, name) pair.

      - name: artist
        description: "Primary artist name associated with the track."
        tests:
          - not_null

      - name: name
        description: "Name (title) of the track."
        tests:
          - not_null

      - name: _load_ts
        description: >
          Earliest ingestion timestamp (from source) for this song entry.
          Useful for understanding when a song first appeared.

      - name: week_number
        description: "ISO week number (from _load_ts) when this song was first seen."
        tests: [not_null]

      - name: year
        description: "Year (from _load_ts) when this song was first seen."
        tests: [not_null]
